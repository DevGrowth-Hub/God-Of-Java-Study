# Ch.08 참조 자료형에 대해서 더 자세히 알아봅시다.
- 8개의 기본 자료형을 제외한 모든 변수는 참조 자료형이다.
  - 기본자료형과의 가장 큰 차이는 new 예약어를 통해 생성하는가 여부
    - 물론 String, 배열, Wrapper 클래스, Enum 예외는 있다.
    - 배열과 wrapper 클래스는 컴파일러가 new Type[] 의 형태로 변환 + 오토박싱 해주는 것이기에, 사실상 String 만 그렇다고 생각해도 될 듯하다.
    - Enum 의 경우, 컴파일시 내부적으로 final static 인스턴스가 생성됨.
- 참조자료형은 String 을 제외하고는 `=` 연산자만 사용가능하다. 
  - String 만이 + 연산자를 사용할 수 있는 유일한 참조 자료형이다.
- 기본 생성자
  - 개발자가 의도적으로 클래스에 만들지 않았을 경우, 컴파일러가 추가하는 생성자.
### 자바에서 생성자는 왜 필요할까?
- 클래스의 객체(인스턴스)를 생성하기 위해 필요함
- 생성자는 메서드와 비슷하게 선언할 수 있으나 메서드와 달리 리턴타입이 없고, 이름을 지정할 수 없고 클래스 이름과 동일해야한다는 점이 있다.
  - 리턴타입이 없는 이유 => 생성자의 리턴 타입은 클래스의 객체로 고정되기 때문
  - 생성자의 이름이 클래스 이름과 동일해야하는 이유 => 컴파일러가 생성자로 인식하기 위해서.
    - 컴파일러가 클래스를 인식하는 방법과, 인식 후 어떤 플로우로 적용되는지?
  - 생성자는 되도록 클래스의 메서드들 중 가장 상단에 선언하는 것이 좋다함.
  - 생성자가 없어도 객체를 얻을 수 있는 클래스도 있다고 한다. 어떤 클래스가 있을까?
    - String, Wrapper class 등

### 생성자는 몇개까지 있어도 될까?
- DTO 패턴을 예로 들며 설명한 내용중, 클래스의 객체를 생성할 때, 그 아무 정보도 모를 수 있고, 아주 조금 (이름, 나이, 번호 중 하나), 전부 알고 있을 수도 있는데, 각각에 상황에 맞는 생성자를 사용할 수 있게 하기위해 생성자는 여러가지 다른 파라미터를 가지고 만들 수 있는 듯 하다.
  - 이런 경우에 필요한 생성자를 골라 사용할 수 있도록 하기 위함이라함
  - 그러나 너무 많이 만드는 건 좋은 습관은 아님 필요한 생성자만 사용하는게 더 좋다고 함

### 객체의 변수와 매개벼수를 구분하기 위한 this
- this 는 예약어로 객체의 생성자와 메서드안에서 이 객체의 변수, 함수를 호출하기위해 사용된다.
- 이 예약어가 없을시, 컴파일러는 매개변수로 사용되는 값과 인스턴스 변수로 사용되는 값을 구분하지 못하도 스콮이 더 낮은 쪽이라 생각하고 적용할 것이다.
  - ```java
    public class ExampleClass {
        int exampleInt;
    
        ExampleClass(int exampleInt) {
            exampleInt = exampleInt;
        }
    }
    ```
    이 코드는 정상적으로 컴파일되고 동작하나, 이 생성자에서 행하는 exampleInt = exampleInt 는 사실상 매개변수에 매개변수를 할당하는 무의미한 행위만 한다. (실질적으로는 기본 생성자와 동일하다)
### 메서드 Overloading
- 같은 이름의 메서드를 매개 변수의 타입, 개수, 순서를 다르게 정의하여 여러 개 선언할 수 있게 해주는 기능.
  - 왜 이것이 필요할까? => `같은 역할을 하는 메서드는 같은 메서드 이름을 가져야 한다` 는 모토로 메서드를 만들어 사용하기 위하여.
    - 생성자도 매개변수에 따라 다르게 인식되는 것도 일종의 오버로드라고 함
      - 그러나 생성자는 메서드가 아니라고 명시했다. 그러면 오버로딩은 생성자에도 적용되는 것이 맞는가?
        - 맞다 ([JLS](https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.8.8)). JLS 에서 매우 구체적으로 그렇다고 설명하고 있다.
### 메서드에서 값 넘겨주기
#### 자바에서 메서드가 종료되는 조건:
      1. 메서드의 모든 문장이 실행되었을 때
      2. return 문장에 도달했을 때
        2-1. return; 은 "메서드 수행을 종료해"로 인식된다함.
      3. 예외가 발생(throw) 했을 때

### static 메서드와 일반 메서드의 차이.
- static 메서드 내에서는 해당 클래스의 인스턴스 변수는 사용이 불가함.
- static 의 위험성:
  - 프로그램의 시작점 부터 끝점까지 모든 해당 클래로 만든 객체에서 같은 값을 바라보게 되고, 이로인해 예기치 못한 상황이 발생할 수 있음.
    - 별도의 변수를 선언(a1, a2)하고, a1의 클래스 변수만을 수정하였으나 a2의 클래스 변수도 영향을 받아버리게 되는 상황
    - 이외에 발생할 수 있는 문제는 어떤게 있을까?
- 이외에 어떠한 차이가 있을까?
  - static 메서드는 객체가 아닌 클래스에 소속되는 메서드로, `클래스명.메서드(매개변수)` 의 형태로 `객체의 생성없이` 호출함.
  - this 예약어를 사용할 수 없음 (인스턴스 변수 사용불가)
  - 클래스의 소속되기에 overriding 이 불가능함.
  - 클래스 변수 처럼 저장되는 영역이 다른가?
    - 그렇지는 않다. 메서드와 생성자, 변수정보등은 모두 클래스 로딩시 JVM 의 Method Area (Metaspace) 영역에 저장되기에 저장되는 영역은 같고, 메소드 호출시의 스택에 쌓이는 방식도 같음.

### static block
- 클래스의 객체가 생성되면서 딱 한번만 불려야하는 코드를 정의하는 방법.
```java
static {
	// 단 한번만 수행할 코드
}
```
- 이런 식으로 활용한다
- 클래스 내부에 선언되어 있어야 하며, 객체가 생성되거나, 해당 블록안의 클래스 변수들이 호출되기 전에 한번만 호출되고, 이후에는 호출할 방법이 없다.
  - 메서드 / 생성자에 선언할 수 없다.
  - `객체가 생성될 떄 마다` 가 아니라 `프로그램 시작 시점 부터 최초로 해당 블록안에서 사용되는 값들이 호출되는 때 || 객체가 생성되는 때`이다.
  - 초기화 할 때 꼭 수행되어야 하는 작업이 있을 경우 유용하게 사용될 수 있다.

### Pass By Value, Pass By Reference
#### Pass By Value
- 메서드를 호출해 매개변수로 값을 넘길 때, 원래의 값은 놔두고 새로 복제된 값만 전달한다는 의미이다.
  - 그렇기 때문에, 넘겨 받은 쪽에서 해당 매개변수를 어떻게 변겯하든 호출한 쪽의 값은 변경되지 않는다.
- 기본 자료형은 모두 무조건 Pass By Value 로 동작한다.
#### Pass By Reference
- 메서드를 호출해 매개변수로 값을 넘길 때, 원래의 값을 가진 reference를 전달한다는 의미이다.
  - 넘겨 받은 쪽에서 해당 매개 변수를 변경하면, 호출한 쪽에도 영향을 준다.
- 참조 자료형은 모두 Pass By Reference 로 동작한다
  - 그러나 아예 새로운 값을 할당하는 경우에는 기존 호출한 영역의 값을 변경하는게 아니게 되어 호출한 쪽의 값은 영향을 받지 않게된다.
- 🚨❗ **[의문점]**
 pass by reference 관련하여 참조형의 데이터가 신규 생성되는 값으로 바뀔 경우에는 기존 값에 영향이 없다고 하는데 이는 왜 일까? 또, 자바에서의 pass by reference 가 진정 참조를 전달하는게 맞을까?
  - 참조 주소 자체를 복사해서 메서드에 전달한다. 즉 참조형 변수의 참조값을 값으로 전달하는 방식임.
  - 즉 매개변수로 받은 메서드 쪽에서는 해당 참조의 주소를 받아서 이 받은 주소에 있는 데이터를 수정하게 되면 호출한 원본 쪽에도 영향이 가는 것인데, 새로운 객체를 할당해 버리게 되는 경우, 새로운 데이터가 생김에 따라 heap 메모리에 신규 인스턴스를 생성하고 그 주소를 매개변수에 할당하게 되버림. 매개 변수 자체는 해당 메서드의 종료 시점이 GC 시점이기에 메서드가 종료되면 삭제되게 되며, 원본과의 관계를 잃어버린 객체(새로운 주소값을 가지게 된 매개 변수)에 대한 수정은 메서드의 종료와 동시에 무의미 해지는 것.

### 임의 개수의 매개 변수를 넘기는 방식 (...)
- 하나의 메서드에는 한번만 사용이 가능함
- 매개변수들중 가장 마지막에 선언이 되어야만함