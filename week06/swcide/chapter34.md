# 📘 자바의 신 VOL.2 – 17장: Java 10에서는 무엇이 달라졌을까?

## Java 10에서 추가되거나 달라진 기능들은?

### 추가되거나 변경된 것
| 변경 사항/기능 | 설명 |
|---|---|
| 지역변수에 대한 타입 추론 기능 | `var`로 **지역 변수** 타입을 컴파일러가 추론. 선언과 동시에 **초기화 필수**, 필드/매개변수/반환타입에는 사용 불가. |
| 수정 불가능한 Collection | `List/Set/Map.copyOf(...)`, `Collectors.toUnmodifiable*`로 **불변 컬렉션** 생성. 수정 시 `UnsupportedOperationException`. |
| Optional에 `orElseThrow()` 추가 | 값이 없으면 **인자 없는** `NoSuchElementException`을 던짐. `get()`의 권장 대체. |

### 성능적 개선
| 항목 | 설명 |
|---|---|
| G1의 Parallel Full GC 제공 | **Full GC 병렬화**로 대용량 힙에서 **최악 지연시간** 감소. |
| 애플리케이션 클래스 데이터 공유(AppCDS) | 클래스 메타데이터를 공유 아카이브에 저장/공유해 **시작 시간 단축**, **메모리 절감**. |
| Graal Compiler(실험) 사용 가능 | **실험적 JIT 컴파일러** 선택 가능(옵션으로 활성화). |
---
## 타입을 일일이 입력하기 귀찮다면 var를 사용해도 된다
- **개념**: 지역 변수 선언에서 **우변 값을 보고 타입을 컴파일 타임에 추론**.
- **범위**: **지역 변수 전용**. 필드, 메서드 **매개변수/반환 타입에는 사용 불가**.
- **조건**: **즉시 초기화 필수**(우변이 `null`만이면 추론 불가).
- **예(설명)**: 문자열 리터럴을 대입하면 **`String`으로**, 정수 리터럴 `42`를 대입하면 **`int`로** 추론.
- **가독성 팁**
    - 우변만으로 타입이 **분명할 때** 사용.
    - 제네릭 생성과 함께 쓰면 **장황한 좌변 타입**을 줄일 수 있음.
    - 공개 API 경계(메서드 시그니처)에는 **명시 타입 유지**가 안전.

---

## 수정 불가능한 Collection
- **목적**: 생성 이후 **추가/삭제/수정이 불가능**한 컬렉션.
- **Java 10 추가**
    - **수집기 계열**: `Collectors.toUnmodifiableList/Set/Map` — **스트림 결과를 곧바로 불변**으로 수집.
    - **복사 계열**: `List/Set/Map.copyOf(...)` — 기존 컬렉션의 **불변 사본** 생성(이미 불변이면 해당 인스턴스 재사용).
- **동작**: 변경 시도 시 **`UnsupportedOperationException`** 발생.
- **Java 9와의 위치 정리**
    - `List.of(...)`, `Set.of(...)`, `Map.of(...)`는 **리터럴 값**으로 **간단히 불변 컬렉션**을 만들 때 유리(매개변수 개수에 제한이 있는 형태로 소개되곤 함).
    - Java 10의 `toUnmodifiable*`/`copyOf`는 **스트림 처리 결과**나 **기존 컬렉션**을 **불변화**할 때 적합.
- **선택 가이드**
    - **정적 값** → `of(...)`
    - **동적 결과/변환** → `toUnmodifiable*` 또는 `copyOf(...)`